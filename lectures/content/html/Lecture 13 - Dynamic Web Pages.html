<!doctype html>
<html lang="en">

	<head>
		<meta charset="utf-8">

		<title>Dynamic Web Pages</title>

		<link rel="stylesheet" href="../css/reveal.css" />
		<link rel="stylesheet" href="../css/theme/black.css" id="theme" />
		<link rel="stylesheet" href="../css/style.css" />

	</head>

	<body>

		<div class="reveal">

			<div class="slides">

				<section>
					<h1>Dynamic Web Pages</h1>
					<p>
						Info 253: Web Architecture<br />
						Kay Ashaolu
					</p>
				</section>

				<section>
					<h1>Review</h1>
					<img src="../assets/lecture-11/overview.png" height="500px" />
				</section>

				<section>
					<h1>URL</h1>
					<ul>
						<li><a href="http://www.yelp.com/biz/jupiter-berkeley#query:jupiters" target="_blank">http://www.yelp.com/biz/jupiter-berkeley#query:jupiters</a></li>
					</ul>
				</section>

				<section>
					<h1>HTTP</h1>
					<p>curl -v "https://www.google.com/"</p>
					<pre>
*   Trying 172.217.4.132...
* TCP_NODELAY set
* Connected to www.google.com (172.217.4.132) port 443 (#0)
* TLS 1.2 connection using TLS_ECDHE_ECDSA_WITH_AES_128_GCM_SHA256
* Server certificate: www.google.com
* Server certificate: Google Internet Authority G2
* Server certificate: GeoTrust Global CA
&gt; GET / HTTP/1.1
&gt; Host: www.google.com
&gt; User-Agent: curl/7.54.0
&gt; Accept: */*
					</pre>
				</section>

				<section>
					<h1>HTTP</h1>
					<pre>
&lt; HTTP/1.1 200 OK
&lt; Date: Thu, 05 Oct 2017 12:19:28 GMT
&lt; Expires: -1
&lt; Cache-Control: private, max-age=0
&lt; Content-Type: text/html; charset=ISO-8859-1
&lt; P3P: CP="This is not a P3P policy! See g.co/p3phelp for more info."
&lt; Server: gws
&lt; X-XSS-Protection: 1; mode=block
&lt; X-Frame-Options: SAMEORIGIN
&lt; Set-Cookie: NID=113=I4RF80L1QA2k8c_-n_D_n6FuFF5VK0I2PgYxoJQEMT7qdSSGazDeYfMDYgrAmZ3x-3Z_MGSvCrl8IvI2DM70SsAZKZcdF25qwkthJQjdh4P75ucHUZ8HY5wDprcJmLsr; expires=Fri, 06-Apr-2018 12:19:28 GMT; path=/; domain=.google.com; HttpOnly
&lt; Alt-Svc: quic=":443"; ma=2592000; v="39,38,37,35"
&lt; Accept-Ranges: none
&lt; Vary: Accept-Encoding
&lt; Transfer-Encoding: chunked
&lt; 
<!doctype html><html itemscope="" itemtype="http://schema.org/WebPage" lang="en"><head>
...
					</pre>
				</section>

				<section>
					<h1>Protocols and State</h1>
					<ul>
						<li><strong>State:</strong> Associated information</li>
						<li><strong>Stateful:</strong> Interpretation depends on history of actions</li>
						<li><strong>Stateless:</strong> Commands cannot access history</li>
					</ul>
				</section>

				<section>
					<h1>Telephone Protocol</h1>
					<ul>
						<li><strong>Bank:</strong> must identify yourself for each request</li>
						<li><strong>Family:</strong> can instantly recognize you, resume conversation where it left off</li>
					</ul>
				</section>

				<section>
					<h1>SSH/Terminal is Stateful</h1>
					<ul>
						<li>Relative directories depend on previous cd commands</li>
						<li>Interactive sessions</li>
						<li>Don't have to resend login information each command</li>
					</ul>
				</section>

				<section>
					<h1>HTTP is Stateless</h1>
					<ul>
						<li>Must specify full context each request
							<ul>
								<li>Absolute path</li>
								<li>Hostname</li>
								<li>Cookies*</li>
								<li>Current request doesn't depend on history</li>
								<li>Even on open connections, actual commands are stateless</li>
							</ul>
						</li>
					</ul>
				</section>

				<section>
					<h1>HTML over HTTP</h1>
					<p>
						&lt;img src=&quot;img/raptor-genie.jpg&quot;&gt;
					</p>
					<ul>
						<li>Relative or absolute?</li>
						<li>How does the browser request this image?</li>
					</ul>
				</section>

				<section>
					<h1>Paths in HTML &amp; HTTP</h1>
					<ul>
						<li><strong>HTTP:</strong> Absolute paths</li>
						<li><strong>HTML:</strong> Absolute or relative paths</li>
						<li><strong>Browser:</strong> Translates relative paths with current URL + relative</li>
					</ul>
				</section>

				<section>
					<h1>Stateless Trade-offs</h1>
					<ul>
						<li>State requires space and coordination</li>
						<li>State inherent in many applications
							<ul>
								<li>So it must be handled by client</li>
								<li>Most common: authentication</li>
							</ul>
						</li>
					</ul>
				</section>

				<section>
					<h1>Authentication</h1>
					<ul>
						<li>What user is making the request?</li>
						<li>Should the server "remember" who is making the request?</li>
						<li>No! Browser will always send authorization information</li>
					</ul>
				</section>

				<section>
					<h1>Application State</h1>
					<ul>
						<li>Just because the <strong>protocol</strong> is <strong>stateless</strong></li>
						<li>doesn't mean the <strong>application</strong> can't be <strong>stateful</strong></li>
						<li>Information about user stored, explicitly transmitted</li>
					</ul>
				</section>

				<section>
					<h1>Static vs. Dynamic Web Page</h1>
					<ul>
						<li>Static web pages are files that don't change</li>
						<li>Dynamic web pages get generated by the server</li>
						<li>Dynamic is an overloaded term</li>
					</ul>
				</section>

				<section>
					<h1>Trade-offs</h1>
					<ul>
						<li>Static pages can be read off disk quickly</li>
						<li>Static pages can be served out of RAM even faster</li>
						<li>Dynamic pages can change</li>
						<li>Dynamic pages may use less space</li>
					</ul>
				</section>

				<section>
					<h1>But why should resources change?</h1>
					<ul>
						<li>Your "own" profile page</li>
						<li>Updates (new reviews, activity feed)</li>
						<li>Permissions</li>
						<li>External data source</li>
					</ul>
				</section>

				<section>
					<h1>Example: Craigslist</h1>
					<ul>
						<li>Every ad has a page</li>
						<li>Users can create and remove ads</li>
						<li>Ad pages have text, pictures, etc.</li>
					</ul>
				</section>

				<section>
					<h1>Static Serving</h1>
					<ul>
						<li>Every ad uploaded generates an HTML file</li>
						<li>When a user requests <a href="https://sfbay.craigslist.org/d/apts-housing-for-rent/search/apa" target="_blank">https://sfbay.craigslist.org/d/apts-housing-for-rent/search/apa</a> serve the file</li>
						<li>CSS, JavaScript, and also static files</li>
					</ul>
				</section>

				<section>
					<h1>Dynamic Serving</h1>
					<ul>
						<li>Every ad uploaded, text kept in a database</li>
						<li>When a user requests <a href="https://sfbay.craigslist.org/d/apts-housing-for-rent/search/apa" target="_blank">https://sfbay.craigslist.org/d/apts-housing-for-rent/search/apa</a> generate an HTML response</li>
						<li>Response template is like the Jinja templates we used in Flask</li>
					</ul>
				</section>

				<section>
					<h1>Requirements</h1>
					<ul>
						<li>The data will be frequently modified by the user</li>
						<li>Must serve pages as cheaply as possible</li>
						<li>Must be able to copy pages to another server</li>
						<li>Designers must iterate on site design</li>
						<li>Like Wikipedia, must create links to new pages in old</li>
					</ul>
				</section>

				<section>
					<h1>What is done in industry?</h1>
					<ul>
						<li>Both!</li>
						<li>Data stored in a database</li>
						<li>When users request page, generate it</li>
						<li>But also cache it!</li>
						<li>So the next time, it can be served like a file</li>
					</ul>
				</section>

				<section>
					<h1>CSS and JavaScript</h1>
					<ul>
						<li>Still static</li>
						<li>Fairly rare that those assets are dynamically generated</li>
						<li>Exception: some images</li>
					</ul>
				</section>

				<section>
					<h1>Questions?</h1>
				</section>

			</div>
		</div>

		<script src="../js/reveal.js"></script>

		<script>

			Reveal.initialize();

		</script>
	</body>
</html>